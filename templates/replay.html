<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OptionScalp Pro - Ultra Order Flow</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="top-bar">
        <div class="brand">OptionScalp Pro</div>
        <div class="controls">
            <div id="standard-replay-controls">
                <select id="index-select">
                    <option value="BANKNIFTY">BANKNIFTY</option>
                    <option value="NIFTY">NIFTY</option>
                </select>
                <input type="date" id="replay-date" value="2026-01-21" style="background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px; margin: 0 5px;">
                <button onclick="startReplay()" class="btn-replay">Start Replay</button>
                <button onclick="toggleMongoUI()" style="margin-left: 10px;">Mongo Replay</button>
            </div>

            <div id="mongo-replay-controls" style="display: none;">
                <input type="text" id="mongo-idx" placeholder="Index Key (NSE_INDEX|...)" style="background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px; margin: 0 5px; width: 150px;">
                <input type="text" id="mongo-ce" placeholder="CE Key" style="background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px; margin: 0 5px; width: 100px;">
                <input type="text" id="mongo-pe" placeholder="PE Key" style="background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px; margin: 0 5px; width: 100px;">
                <input type="date" id="mongo-date" value="2026-01-22" style="background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px; margin: 0 5px;">
                <button onclick="startMongoReplay()" class="btn-replay">Run Mongo</button>
                <button onclick="toggleMongoUI()" style="margin-left: 10px;">Standard</button>
            </div>

            <button onclick="pauseReplay()">Pause</button>
            <button onclick="stepReplay()">Step</button>
            <select id="speed-select" onchange="setReplaySpeed(this.value)" style="margin-left: 10px; background: #2b2b3b; color: white; border: 1px solid #444; border-radius: 4px; padding: 2px 5px;">
                <option value="1.0">0.5x</option>
                <option value="0.5" selected>1x</option>
                <option value="0.2">2x</option>
                <option value="0.1">5x</option>
            </select>
            <input type="range" id="replay-slider" min="50" max="300" value="50" style="width: 150px; margin-left: 10px;" oninput="onSliderChange(this.value)">
            <a href="/" class="btn-nav">Switch to Live</a>
        </div>
        <div id="status" class="status">System Ready</div>
    </div>

    <div class="main-container">
        <div class="chart-section">
            <div class="chart-container">
                <div class="chart-label"><span>INDEX</span></div>
                <div id="index-chart" class="chart-box"></div>
            </div>
            <div class="chart-container">
                <div class="chart-label" id="ce-label"><span>CE OPTION</span></div>
                <div id="ce-chart" class="chart-box"></div>
            </div>
            <div class="chart-container">
                <div class="chart-label" id="pe-label"><span>PE OPTION</span></div>
                <div id="pe-chart" class="chart-box"></div>
            </div>
        </div>
    </div>

    <div class="signal-overlay" id="signal-overlay">
        <div class="overlay-header">
            SIGNAL LOG
            <span style="cursor: pointer;" onclick="document.getElementById('signals-list').style.display = document.getElementById('signals-list').style.display === 'none' ? 'block' : 'none'">[toggle]</span>
        </div>
        <div id="signals-list" class="signals-view"></div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
